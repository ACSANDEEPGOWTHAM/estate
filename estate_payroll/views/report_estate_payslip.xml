<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="report_estate_payslip">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="batch">
                    <t t-call="report.internal_layout">
                        <div class="page">

                            <!-- Set variable for total -->
                            <t t-set="total_day" t-value="0"/>
                            <t t-set="total_edw" t-value="0"/>
                            <t t-set="total_hour" t-value="0"/>
                            <t t-set="total_ot" t-value="0"/>
                            <t t-set="total_pr" t-value="0"/>
                            <t t-set="total_adj" t-value="0"/>
                            <t t-set="total_allowance" t-value="0"/>
                            <t t-set="total_deduction" t-value="0"/>
                            <t t-set="total_st_wage" t-value="0"/>
                            <t t-set="total_bpjs_tk" t-value="0"/>
                            <t t-set="total_bpjs_k" t-value="0"/>
                            <t t-set="total_tax" t-value="0"/>
                            <t t-set="total_st_other" t-value="0"/>

                            <!-- Payroll Cover Slip - show list of all by team -->

                            <!-- Cover Slip Header -->
                            <h2 class="text-center">Rekapitulasi Daftar Upah Kemandoran
                                <t t-if="batch.state != 'close'">(Draft)</t></h2>

                            <table class="table-condensed table-borderless" style="font-size:65%" width="100%">
                                <tr>
                                    <td width="20%"><strong>Kebun</strong></td>
                                    <td width="50%">: <t t-if="batch.estate_id"><t t-esc="batch.estate_id.name"/></t></td>
                                    <td width="15%" class="text-right"><strong>HK/Bulan</strong></td>
                                    <td width="15%"></td>
                                </tr>
                                <tr>
                                    <td width="20%"><strong>Divisi</strong></td>
                                    <td width="50%">: <t t-if="batch.division_id"><t t-esc="batch.division_id.name"/></t></td>
                                    <td width="15%" class="text-right"><strong>HK/Hari</strong></td>
                                    <td width="15%"></td>
                                </tr>
                                <tr>
                                    <td width="20%"><strong>Periode</strong></td>
                                    <td width="50%">: <t t-esc="datetime.datetime.strptime(batch.date_start, '%Y-%m-%d').strftime('%d-%b-%Y')"/>
                                        - <t t-esc="datetime.datetime.strptime(batch.date_end, '%Y-%m-%d').strftime('%d-%b-%Y')"/></td>
                                    <td width="15%" class="text-right"></td>
                                    <td width="15%"></td>
                                </tr>
                            </table>
                            <!-- /Cover Slip Header -->

                            <table class="table table-striped table-condensed table-bordered" style="font-size:65%">
                                <thead>
                                    <tr>
                                        <th rowspan="2" colspan="4">Kemandoran</th>
                                        <th colspan="6" class="text-center">Upah</th>
                                        <th rowspan="2">Tunjangan</th>
                                        <th rowspan="2">Potongan</th>
                                        <th rowspan="2">Sub Total</th>
                                        <th colspan="3" class="text-center">Lain</th>
                                        <th rowspan="2">Sub Total</th>
                                        <!--<th rowspan="2" colspan="2">Signature</th>-->
                                    </tr>
                                    <tr>
                                        <!-- do not use code as header - i18n problem -->
                                        <th>HK</th>
                                        <th>Gaji</th>
                                        <th>Jam Lembur</th>
                                        <th>Rp Lembur</th>
                                        <th>Rp Premi</th>
                                        <th>Koreksi</th>
                                        <th>BPJS TK</th>
                                        <th>BPJS K</th>
                                        <th>Pajak</th>
                                    </tr>
                                </thead>
                                <!-- payslip team -->
                                <t t-foreach="get_team(batch.slip_ids)" t-as="team">
                                    <tbody>
                                        <!-- Reset variable per team -->
                                        <t t-set="amount_total_team" t-value="0"/>
                                        <t t-set="amount_total_other" t-value="0"/>
                                        <t t-set="no" t-value="0"/>
                                        <t t-set="last_row" t-value="len(get_payslip_team(team.id, batch.date_start, batch.date_end))"/>
                                        <t t-set="round" t-value="1000"/>

                                        <!-- reset total team -->
                                        <t t-set="total_day_team" t-value="0"/>
                                        <t t-set="total_edw_team" t-value="0"/>
                                        <t t-set="total_hour_team" t-value="0"/>
                                        <t t-set="total_ot_team" t-value="0"/>
                                        <t t-set="total_pr_team" t-value="0"/>
                                        <t t-set="total_adj_team" t-value="0"/>
                                        <t t-set="total_allowance_team" t-value="0"/>
                                        <t t-set="total_deduction_team" t-value="0"/>
                                        <t t-set="total_st_wage_team" t-value="0"/>
                                        <t t-set="total_bpjs_tk_team" t-value="0"/>
                                        <t t-set="total_bpjs_k_team" t-value="0"/>
                                        <t t-set="total_tax_team" t-value="0"/>
                                        <t t-set="total_st_other_team" t-value="0"/>
                                        <!-- /reset total team-->

                                        <!-- team payslip header -->
                                        <!--
                                        <tr>
                                            <td colspan="17">
                                                <strong>
                                                    <t t-if="not team.name">
                                                        Non Kemandoran
                                                    </t>
                                                    <span t-esc="team.name"/>
                                                    <t t-if="team.name">(Mandor <t t-esc="team.employee_id.name"/>)</t>
                                                </strong>
                                            </td>
                                        </tr>
                                        -->
                                        <!-- /team payslip header -->

                                        <!-- payslip team member-->
                                        <t t-foreach="get_payslip_team(team.id, batch.date_start, batch.date_end)" t-as="payslip">

                                            <!-- amount line -->
                                            <t t-set="amount_edw" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'EDW')"/>
                                            <t t-set="amount_ot" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'OT')"/>
                                            <t t-set="amount_hour" t-value="get_overtime_employee(payslip.employee_id.id, batch.date_start, batch.date_end)"/>
                                            <t t-set="amount_pr" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'PR')+get_line_total(payslip.id, payslip.employee_id.id, 'PRWD')"/>
                                            <t t-set="amount_adja" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'ADJA')"/>
                                            <t t-set="amount_adjb" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'ADJB')"/>
                                            <t t-set="amount_adj" t-value="amount_adja-amount_adjb"/>
                                            <t t-set="jhte" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'JHTE')"/>
                                            <t t-set="jhtc" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'JHTC')"/>
                                            <t t-set="jkkc" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'JKKC')"/>
                                            <t t-set="jkmc" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'JKMC')"/>
                                            <t t-set="bpjspkwte" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'BPJSPKWTE')"/>
                                            <t t-set="bpjspkwtc" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'BPJSPKWTC')"/>
                                            <t t-set="amount_bpjs_labour" t-value="jhte+jhtc+jkkc+jkmc"/>
                                            <t t-set="amount_bpjs_health" t-value="bpjspkwte+bpjspkwtc"/>
                                            <t t-set="amount_allowance" t-value="0"/> <!-- no allowance define yet -->
                                            <t t-set="amount_deduction" t-value="jhte+bpjspkwte"/>
                                            <t t-set="amount_total" t-value="(amount_edw+amount_ot+amount_pr+amount_adj)-amount_deduction"/>
                                            <t t-set="amount_sub_total_other" t-value="amount_bpjs_labour+amount_bpjs_health"/>

                                            <t t-set="amount_total_team" t-value="amount_total_team+amount_total"/>
                                            <t t-set="amount_total_other" t-value="amount_total_other+amount_sub_total_other"/>
                                            <t t-set="no" t-value="no+1"/>

                                            <!--
                                            <tr>
                                                <td><t t-esc="no"/></td>
                                                <td><span t-field="payslip.employee_id.name"/></td>
                                                <td><span t-field="payslip.employee_id.nik_number"/></td>
                                                <td><span t-field="payslip.employee_id.contract_type"/>/<span t-field="payslip.employee_id.contract_period"/></td>
                                                <td class="text-right"><span t-field="payslip.worked_days_line_ids[0].number_of_days"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_edw)"/></td>
                                                <td class="text-right"></td>
                                                <td class="text-right"></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_ot+amount_pr)"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_adj)"/></td>
                                                <td class="text-right"></td>
                                                <td class="text-right"><t t-esc="'({0:,.2f})'.format(amount_deduction)"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_total)"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_bpjs_labour)"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_bpjs_health   )"/></td>
                                                <td class="text-right">0</td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_sub_total_other)"/></td>
                                            </tr>
                                            -->

                                            <!-- sum by team-->
                                            <t t-set="total_day_team" t-value="total_day_team + payslip.worked_days_line_ids[0].number_of_days"/>
                                            <t t-set="total_edw_team" t-value="total_edw_team + amount_edw"/>
                                            <t t-set="total_hour_team" t-value="total_hour_team + amount_hour"/>
                                            <t t-set="total_ot_team" t-value="total_ot_team + amount_ot"/>
                                            <t t-set="total_pr_team" t-value="total_pr_team + amount_pr"/>
                                            <t t-set="total_adj_team" t-value="total_adj_team + amount_adj"/>
                                            <t t-set="total_allowance_team" t-value="total_allowance_team + amount_allowance"/>
                                            <t t-set="total_deduction_team" t-value="total_deduction_team + amount_deduction"/>
                                            <!--<t t-set="total_total" t-value="total_total + amount_total"/>-->
                                            <t t-set="total_st_wage_team" t-value="total_st_wage_team + amount_total"/>
                                            <t t-set="total_bpjs_tk_team" t-value="total_bpjs_tk_team + amount_bpjs_labour"/>
                                            <t t-set="total_bpjs_k_team" t-value="total_bpjs_k_team + amount_bpjs_health"/>
                                            <t t-set="total_tax_team" t-value="0"/>
                                            <t t-set="total_st_other_team" t-value="total_st_other_team + amount_sub_total_other"/>
                                            <!-- /sum by team-->

                                            <!-- sum all -->
                                            <t t-set="total_day" t-value="total_day + payslip.worked_days_line_ids[0].number_of_days"/>
                                            <t t-set="total_edw" t-value="total_edw + amount_edw"/>
                                            <t t-set="total_hour" t-value="total_hour + amount_hour"/>
                                            <t t-set="total_ot" t-value="total_ot + amount_ot"/>
                                            <t t-set="total_pr" t-value="total_pr + amount_pr"/>
                                            <t t-set="total_adj" t-value="total_adj + amount_adj"/>
                                            <t t-set="total_allowance" t-value="total_allowance + amount_allowance"/>
                                            <t t-set="total_deduction" t-value="total_deduction + amount_deduction"/>
                                            <!--<t t-set="total_total" t-value="total_total + amount_total"/>-->
                                            <t t-set="total_st_wage" t-value="total_st_wage + amount_total"/>
                                            <t t-set="total_bpjs_tk" t-value="total_bpjs_tk + amount_bpjs_labour"/>
                                            <t t-set="total_bpjs_k" t-value="total_bpjs_k + amount_bpjs_health"/>
                                            <t t-set="total_tax" t-value="0"/>
                                            <t t-set="total_st_other" t-value="total_st_other + amount_sub_total_other"/>
                                            <!-- /sum all -->
                                        </t>
                                        <!-- /payslip team member -->

                                        <tr>
                                            <td colspan="4">Kemandoran <t t-esc="team.name"/> (<t t-esc="team.employee_id.name"/>)</td>
                                            <td class="text-right"><t t-esc="'{0:,.2f}'.format(total_day_team)"/></td>
                                            <td class="text-right"><t t-esc="'{0:,.2f}'.format(total_edw_team)"/></td>
                                            <td class="text-right"></td>
                                            <td class="text-right"></td>
                                            <td class="text-right"><t t-esc="'{0:,.2f}'.format(total_ot_team+total_pr_team)"/></td>
                                            <td class="text-right"><t t-esc="'{0:,.2f}'.format(total_adj_team)"/></td>
                                            <td class="text-right"></td>
                                            <td class="text-right"><t t-esc="'({0:,.2f})'.format(total_deduction_team)"/></td>
                                            <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_total_team)"/></td>
                                            <td class="text-right"><t t-esc="'{0:,.2f}'.format(total_bpjs_tk_team)"/></td>
                                            <td class="text-right"><t t-esc="'{0:,.2f}'.format(total_bpjs_k_team)"/></td>
                                            <td class="text-right">0</td>
                                            <td class="text-right"><t t-esc="'{0:,.2f}'.format(total_st_other_team)"/></td>
                                        </tr>
                                    </tbody>
                                </t>
                                <!-- /payslip team -->

                                <tr>
                                    <td colspan="4" class="text-right"><strong>Total</strong></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.1f}'.format(total_day)"/></strong></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_edw)"/></strong></td>
                                    <!-- Policy: has no overtime yet.
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_hour)"/></strong></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_ot)"/></strong></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_pr)"/></strong></td>
                                    -->
                                    <td class="text-right"><strong></strong></td>
                                    <td class="text-right"><strong></strong></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_ot+total_pr)"/></strong></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_adj)"/></strong></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_allowance)"/></strong></td>
                                    <td class="text-right"><strong><t t-esc="'({0:,.2f})'.format(total_deduction)"/></strong></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_st_wage)"/></strong></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_bpjs_tk)"/></strong></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_bpjs_k)"/></strong></td>
                                    <td class="text-right"></td>
                                    <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_st_other)"/></strong></td>
                                </tr>
                            </table>

                            <!-- Signature #1 -->
                            <table class="borderless" width="100%">
                                <tr>
                                    <td style="vertical-align: bottom">
                                        <table class="table table-bordered" style="font-size:65%; width: auto">
                                            <tr>
                                                <td style="width: 120px">Dibuat oleh,</td>
                                                <td style="width: 120px">Diperiksa oleh,</td>
                                                <td style="width: 120px">Disetujui oleh,</td>
                                            </tr>
                                            <tr style="height: 80px">
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td class="text-right" style="vertical-align: bottom">
                                        <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', batch.get_qrcode(), 70, 70)"/><br/>
                                        <small><t t-esc="datetime.datetime.today().strftime('%d-%b-%Y')"/></small>
                                    </td>
                                </tr>
                            </table>

                            <p style="page-break-after:always;">  </p>

                            <!-- Payroll List by Team -->

                            <t t-foreach="get_team(batch.slip_ids)" t-as="team">
                                <!-- Set row sum variable -->
                                <t t-set="total_day_team" t-value="0"/>
                                <t t-set="total_edw_team" t-value="0"/>
                                <t t-set="total_hour_team" t-value="0"/>
                                <t t-set="total_ot_team" t-value="0"/>
                                <t t-set="total_pr_team" t-value="0"/>
                                <t t-set="total_adj_team" t-value="0"/>
                                <t t-set="total_allowance_team" t-value="0"/>
                                <t t-set="total_deduction_team" t-value="0"/>
                                <t t-set="total_bpjs_tk_team" t-value="0"/>
                                <t t-set="total_bpjs_k_team" t-value="0"/>
                                <t t-set="total_tax_team" t-value="0"/>

                                <h2 class="text-center">Rekapitulasi Daftar Upah KHL
                                    <t t-if="batch.state != 'close'">(Draft)</t></h2>

                                <table class="table-condensed table-borderless" style="font-size:65%" width="100%">
                                    <tr>
                                        <td width="20%"><strong>Kebun</strong></td>
                                        <td width="50%">: <t t-if="batch.estate_id"><t t-esc="batch.estate_id.name"/></t></td>
                                        <td width="15%" class="text-right"><strong>HK/Bulan</strong></td>
                                        <td width="15%">XX</td>
                                    </tr>
                                    <tr>
                                        <td width="20%"><strong>Divisi</strong></td>
                                        <td width="50%">: <t t-if="batch.division_id"><t t-esc="batch.division_id.name"/></t></td>
                                        <td width="15%" class="text-right"><strong>HK/Hari</strong></td>
                                        <td width="15%">XX</td>
                                    </tr>
                                    <tr>
                                        <td width="20%"><strong>Periode</strong></td>
                                        <td width="50%">: <t t-esc="datetime.datetime.strptime(batch.date_start, '%Y-%m-%d').strftime('%d-%b-%Y')"/>
                                            - <t t-esc="datetime.datetime.strptime(batch.date_end, '%Y-%m-%d').strftime('%d-%b-%Y')"/></td>
                                        <td width="15%" class="text-right"></td>
                                        <td width="15%"></td>
                                    </tr>
                                </table>

                                <t t-if="not team.name">
                                    <h3>Non Kemandoran</h3>
                                </t>

                                <h3><t t-esc="team.name"/> <t t-if="team.name">(Leader <t t-esc="team.employee_id.name"/>)</t></h3>
                                <table class="table table-striped table-condensed table-bordered" style="font-size:65%">
                                    <thead>
                                        <tr>
                                            <th rowspan="2">no.</th>
                                            <th rowspan="2">Name</th>
                                            <th rowspan="2">ID</th>
                                            <th rowspan="2">Type</th>
                                            <th colspan="6" class="text-center">Upah</th>
                                            <th rowspan="2">Tunjangan</th>
                                            <th rowspan="2">Pengurang</th>
                                            <th rowspan="2">Sub Total</th>
                                            <th colspan="3" class="text-center">Lain</th>
                                            <th rowspan="2">Sub Total</th>
                                            <th rowspan="2" colspan="2">Tanda Tangan</th>
                                        </tr>
                                        <tr>
                                            <th>HK</th>
                                            <th>Gaji</th>
                                            <th>Jam Lembur</th>
                                            <th>Rp Lembur</th>
                                            <th>Rp Premi</th>
                                            <th>Koreksi</th>
                                            <th>BPJS TK</th>
                                            <th>BPJS K</th>
                                            <th>Pajak</th>
                                        </tr>

                                    </thead>
                                    <tbody>
                                        <t t-set="amount_total_team" t-value="0"/>
                                        <t t-set="amount_total_other" t-value="0"/>
                                        <t t-set="no" t-value="0"/>
                                        <t t-set="last_row" t-value="len(get_payslip_team(team.id, batch.date_start, batch.date_end))"/>
                                        <t t-set="round" t-value="1000"/>

                                        <t t-foreach="get_payslip_team(team.id, batch.date_start, batch.date_end)" t-as="payslip">
                                            <tr>
                                                <t t-set="amount_edw" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'EDW')"/>
                                                <t t-set="amount_ot" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'OT')"/>
                                                <t t-set="amount_hour" t-value="get_overtime_employee(payslip.employee_id.id, batch.date_start, batch.date_end)"/>
                                                <t t-set="amount_pr" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'PR')+get_line_total(payslip.id, payslip.employee_id.id, 'PRWD')"/>
                                                <t t-set="amount_adja" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'ADJA')"/>
                                                <t t-set="amount_adjb" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'ADJB')"/>
                                                <t t-set="amount_adj" t-value="amount_adja-amount_adjb"/>
                                                <t t-set="jhte" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'JHTE')"/>
                                                <t t-set="jhtc" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'JHTC')"/>
                                                <t t-set="jkkc" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'JKKC')"/>
                                                <t t-set="jkmc" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'JKMC')"/>
                                                <t t-set="bpjspkwte" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'BPJSPKWTE')"/>
                                                <t t-set="bpjspkwtc" t-value="get_line_total(payslip.id, payslip.employee_id.id, 'BPJSPKWTC')"/>
                                                <t t-set="amount_bpjs_labour" t-value="jhte+jhtc+jkkc+jkmc"/>
                                                <t t-set="amount_bpjs_health" t-value="bpjspkwte+bpjspkwtc"/>
                                                <t t-set="amount_allowance" t-value="0"/> <!-- no allowance define yet -->
                                                <t t-set="amount_deduction" t-value="jhte+bpjspkwte"/>
                                                <t t-set="amount_total" t-value="(amount_edw+amount_ot+amount_pr+amount_adj)-amount_deduction"/>
                                                <t t-set="amount_sub_total_other" t-value="amount_bpjs_labour+amount_bpjs_health"/>
                                                <t t-set="amount_total_team" t-value="amount_total_team+amount_total"/>
                                                <t t-set="amount_total_other" t-value="amount_total_other+amount_sub_total_other"/>
                                                <t t-set="no" t-value="no+1"/>

                                                <!-- Sum -->
                                                <t t-set="total_day_team" t-value="total_day_team + payslip.worked_days_line_ids[0].number_of_days"/>
                                                <t t-set="total_edw_team" t-value="total_edw_team + amount_edw"/>
                                                <t t-set="total_hour_team" t-value="total_hour_team + amount_hour"/>
                                                <t t-set="total_ot_team" t-value="total_ot_team + amount_ot"/>
                                                <t t-set="total_pr_team" t-value="total_pr_team + amount_pr"/>
                                                <t t-set="total_adj_team" t-value="total_adj_team + amount_adj"/>
                                                <t t-set="total_allowance_team" t-value="total_allowance_team + amount_allowance"/>
                                                <t t-set="total_deduction_team" t-value="total_deduction_team + amount_deduction"/>
                                                <t t-set="total_bpjs_tk_team" t-value="total_bpjs_tk_team + amount_bpjs_labour"/>
                                                <t t-set="total_bpjs_k_team" t-value="total_bpjs_k_team + amount_bpjs_health"/>
                                                <t t-set="total_tax_team" t-value="0"/>
                                                <!--
                                                <t t-set="total_st_wage" t-value="total_st_wage + amount_total"/>
                                                <t t-set="total_st_other" t-value="total_st_other + amount_sub_total_other"/>
                                                -->

                                                <td><t t-esc="no"/></td>
                                                <td><span t-field="payslip.employee_id.name"/></td>
                                                <td><span t-field="payslip.employee_id.nik_number"/></td>
                                                <td><span t-field="payslip.employee_id.contract_type"/>/<span t-field="payslip.employee_id.contract_period"/></td>
                                                <td><span t-field="payslip.worked_days_line_ids[0].number_of_days"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_edw)"/></td>
                                                <!-- Policy: has no overtime yet.
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_hour)"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_ot)"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_pr)"/></td>
                                                -->
                                                <td class="text-right"></td>
                                                <td class="text-right"></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_ot+amount_pr)"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_adj)"/></td>
                                                <td class="text-right"></td>
                                                <td class="text-right"><t t-esc="'({0:,.2f})'.format(amount_deduction)"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_total)"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_bpjs_labour)"/></td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_bpjs_health   )"/></td>
                                                <td class="text-right">0</td>
                                                <td class="text-right"><t t-esc="'{0:,.2f}'.format(amount_sub_total_other)"/></td>

                                                <!-- Signature column layout side-by-side or span for two columns -->
                                                <t t-if="no%2!=0"> <!-- modulus to check even row -->
                                                    <t t-if="no==last_row">
                                                        <td colspan="2" style="width:20%"><t t-esc="no"/></td>
                                                    </t>
                                                    <t t-if="no!=last_row">
                                                        <td rowspan="2" style="width:10%"><t t-esc="no"/></td>
                                                        <td rowspan="2" style="width:10%"><t t-esc="no+1"/></td>
                                                    </t>
                                                </t>
                                            </tr>
                                        </t>

                                        <tr>
                                            <td colspan="4" class="text-right"><strong>Sub Total Team <t t-esc="team.name"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.1f}'.format(total_day_team)"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_edw_team)"/></strong></td>
                                            <!-- Policy: has no overtime yet.
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_hour_team)"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_ot_team)"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_pr_team)"/></strong></td>
                                            -->
                                            <td class="text-right"><strong></strong></td>
                                            <td class="text-right"><strong></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_ot_team+total_pr_team)"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_adj_team)"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_allowance_team)"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'({0:,.2f})'.format(total_deduction_team)"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(amount_total_team)"/></strong></td>
                                            <!--<td colspan="3" class="text-right"><strong>Total Other</strong></td>-->
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_bpjs_tk_team)"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_bpjs_k_team)"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(total_tax_team)"/></strong></td>
                                            <td class="text-right"><strong><t t-esc="'{0:,.2f}'.format(amount_total_other)"/></strong></td>

                                            <td colspan="2" style="width:20%"></td>
                                        </tr>
                                    </tbody>
                                </table>

                                <!-- Signature #2 -->
                                <table class="borderless" width="100%">
                                    <tr>
                                        <td style="vertical-align: bottom">
                                            <table class="table table-bordered" style="font-size:65%; width: auto">
                                                <tr class="text-center">
                                                    <!-- use 120px/signature as standard width -->
                                                    <td style="width: 120px">Dibuat oleh,</td>
                                                    <td style="width: 360px" colspan="3">Diperiksa oleh,</td>
                                                    <td style="width: 360px" colspan="3">Disetujui oleh,</td>
                                                    <td style="width: 240px" colspan="2">Diketahui oleh,</td>
                                                </tr>
                                                <tr style="height: 80px">
                                                    <td width="120px"></td>
                                                    <td width="120px"></td>
                                                    <td width="120px"></td>
                                                    <td width="120px"></td>
                                                    <td width="120px"></td>
                                                    <td width="120px"></td>
                                                    <td width="120px"></td>
                                                    <td width="120px"></td>
                                                    <td width="120px"></td>
                                                </tr>
                                                <tr class="text-center">
                                                    <td><br/>Senior Kerani Administrasi</td>
                                                    <td><u><t t-esc="team.assistant_id.name"/></u><br/>Asisten</td>
                                                    <td><br/>KTU</td>
                                                    <td><br/>HR GA Head Assistant</td>
                                                    <td><u>Agus Prabowo</u><br/>Estate Manager</td>
                                                    <td><u>Petrus T. Wijoyo</u><br/>GM Operation</td>
                                                    <td><u>Ekos Albar</u><br/>Director</td>
                                                    <td><u>Cahyo Wibawanto</u><br/>Agronomy Dept. Head</td>
                                                    <td><u>Mertha Lidyawati</u><br/>HR Dept. Head</td>
                                                </tr>
                                            </table>
                                        </td>
                                        <td class="text-right" style="vertical-align: bottom">
                                            <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', batch.get_qrcode(), 70, 70)"/><br/>
                                            <small><t t-esc="datetime.datetime.today().strftime('%d-%b-%Y')"/></small>
                                        </td>
                                    </tr>
                                </table>
                                <!-- Create break -->
                                <p style="page-break-after:always;">  </p>
                            </t>
                        </div>
                    </t>
                </t>
            </t>
        </template>

    </data>
</openerp>