<openerp>
    <data>
        <record model="ir.ui.view" id="view_form_inherit_button_comparison_tracability">
             <field name="name">Button comparison Traceability</field>
             <field name="model">purchase.requisition</field>
             <field name="inherit_id" ref="purchase_requisition.view_purchase_requisition_form"/>
             <field name="arch" type="xml">
                 <xpath expr="//div[@class='oe_button_box']" position="inside">
                      <button name="return_action_to_open"
                                type="object"
                                class="oe_stat_button"
                                string="QCF"
                                icon="fa-list-alt"
                                context="{'xml_id':'quotation_comparison_action'}"
                                attrs="{'invisible': [('validation_qcf', '!=', True)]}"
                                >
                     </button>
                     <button name="purchase_request_correction" type="object"
                                class="oe_stat_button"
                                string="Corection PP"
                                icon ="fa-reply"
                             attrs="{'invisible': [('validation_button_correction','=',False)]}"
                             >

                     </button>
                 </xpath>


             </field>
         </record>

        <record id="purchase_requisition.action_purchase_requisition_partner" model="ir.actions.act_window">
               <field name="name">Choose Vendor</field>
               <field name="type">ir.actions.act_window</field>
               <field name="res_model">purchase.requisition.partner</field>
               <field name="view_type">form</field>
               <field name="view_mode">form</field>
               <field name="context">{'record_id' : active_id}</field>
               <field name="target">new</field>
        </record>

        <record model="ir.ui.view" id="view_form_inherit_comparison_tracability">
             <field name="name">Button comparison Traceability</field>
             <field name="model">purchase.requisition</field>
             <field name="inherit_id" ref="purchase_requisition.view_purchase_requisition_form"/>
             <field name="arch" type="xml">

                 <xpath expr="//header/button[@name='generate_po']" position="after">
                     <button name="tender_state_closed" states="done" string="PP Close" type="object" class="oe_highlight"/>
                 </xpath>

                 <xpath expr="//field[@name='state']" position="replace">
                     <field name="state" widget="statusbar" statusbar_visible="draft,in_progress" statusbar_colors='{"in_progress":"blue"}'/>
                 </xpath>

                 <xpath expr="//h1/field[@name='name']" position="replace">
                           <field name="complete_name" class="oe_inline" invisible="0"
                               attrs="{'readonly': [('state','not in',('draft'))]}"/>
                 </xpath>

                 <xpath expr="//field[@name='origin']" position="replace">
                     <field name="origin" placeholder="e.g. PO0025"
                            invisible="1"/>
                 </xpath>

                 <xpath expr="//button[@name='open_product_line']" position="replace">
                     <button name="open_product_line" type="object" string="Product Lines" class="oe_stat_button" icon="fa-list"
                        invisible="1" groups="purchase.group_advance_bidding"/>
                 </xpath>

                  <xpath expr="//button[@name='open_rfq']" position="replace">
                     <button name="open_rfq" type="object" string="RFQs/Bids" class="oe_stat_button" icon="fa-list-alt"
                        invisible="1"/>
                 </xpath>


                 <xpath expr="//field[@name='schedule_date']" position="after">
                     <field name="quotation_state" string="Status QCF"
                            invisible="0"/>
                 </xpath>

                 <xpath expr="//field[@name='origin']" position="after">
                     <field name="request_id" readonly="1" string="No PP"/>
                 </xpath>

                 <xpath expr="//field[@name='schedule_date']" position="replace">
                     <field name="schedule_date" string="Due Date" invisible="1" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                 </xpath>

                 <xpath expr="//field[@name='schedule_date']" position="after">
                     <field name="due_date" string="Due Date" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                     <field name="validation_due_date" invisible="1"/>
                 </xpath>

                 <xpath expr="//field[@name='user_id']" position="after">
                     <field name="validation_button_correction" invisible="1"/>
                     <field name="validation_correction" invisible="1"/>
                     <field name="validation_missing_product" invisible="1"/>
                     <field name="check_missing_product" invisible="1"/>
                     <field name="validation_qcf" invisible="1"/>
                     <field name="companys_id" string="Company" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                     <field name="type_location" string="Location" invisible="1"/>
                     <field name="location" string="Location" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                     <field name="force_closing" string="Force Close Tender" attrs="{'readonly': [('state','not in',('done'))]}"/>
                     <field name="validation_check_backorder" string="Back Order" invisible="1"/>
                 </xpath>

                 <xpath expr="//tree/field[@name='product_id']" position="after">
                           <field name="est_price" string="Est Price" class="oe_inline" invisible="0"
                               readonly="1"/>
                 </xpath>

                 <xpath expr="//tree/field[@name='product_qty']" position="after">
                           <field name="qty_received" class="oe_inline" invisible="0"
                               readonly="1"/>
                           <field name="qty_outstanding" class="oe_inline" invisible="0"
                               readonly="0"/>

                            <field name="check_missing_product" class="oe_inline" invisible="1"
                               readonly="0"/>
                 </xpath>
                 <xpath expr="//tree/field[@name='schedule_date']" position="replace">
                           <field name="schedule_date" string="Due Date" invisible="1"/>
                 </xpath>
                 <xpath expr="//form/group/field[@name='schedule_date']" position="replace">
                           <field name="schedule_date" string="Due Date" invisible="1"/>
                 </xpath>
                 <xpath expr="//tree/field[@name='name']" position="replace">
                        <field name="name" invisible="1" string="Reference"/>
                 </xpath>
                 <xpath expr="//tree/field[@name='name']" position="after">
                         <field name="complete_name" invisible="0"
                               string="Reference"/>
                         <field name="po_no" invisible="1"
                               readonly="1"/>
                         <field name="hide" invisible="1"/>
                 </xpath>

                 <xpath expr="//button[@name='%(purchase_requisition.action_purchase_requisition_partner)d']" position="replace">
                         <button name="%(purchase_requisition.action_purchase_requisition_partner)d" type="action"
                        string="Request a Quotation" icon="fa-cogs"
                        attrs="{'invisible': [('validation_correction','=',False)]}"/>
                 </xpath>

                 <xpath expr="//button[@name='%(purchase_requisition.action_purchase_requisition_partner)d']" position="after">
                        <button name="create_backorder_quotation_comparison_form" type="object"
                                string="Back Order PO"
                                icon ="fa-reply"
                             attrs="{'invisible': ['|',('state','in',('draft')),('validation_check_backorder','=',True)]}"
                             />
                 </xpath>

                 <xpath expr="//button[@name='%(purchase_requisition.action_purchase_requisition_partner)d']" position="after">
                        <button name="create_missing_product_quotation_comparison_form" type="object"
                                string="Order Outstanding Product"
                                icon ="fa-reply"
                             attrs="{'invisible': [('validation_missing_product','=',False)]}"
                             />
                 </xpath>

                 <xpath expr="//field/tree[1]/field[@name='name']" position="before">
                     <field name="validation_check_confirm_vendor" string="QR"/>
                 </xpath>

             </field>
         </record>

        <record model="ir.ui.view" id="inherit_purchase_requisition_tree">
             <field name="name">Inherit purchase requisition Tree</field>
             <field name="model">purchase.requisition</field>
             <field name="inherit_id" ref="purchase_requisition.view_purchase_requisition_tree"/>
             <field name="arch" type="xml">
                 <xpath expr="//tree" position="attributes">
                          <attribute name='colors'>red:validation_due_date==True</attribute>
                 </xpath>

                 <xpath expr="//field[@name='state']" position="after">
                     <field name="quotation_state" string="Status QCF"
                            invisible="0"/>
                 </xpath>
             </field>
         </record>

        <record model="ir.ui.view" id="view_form_inherit_purchase_requisition_tree">
             <field name="name">Inherit Purchase Requisition Tree</field>
             <field name="model">purchase.requisition</field>
             <field name="inherit_id" ref="purchase_requisition.view_purchase_requisition_tree"/>
             <field name="arch" type="xml">
                 <xpath expr="//field[@name='name']" position="replace">
                     <field name="complete_name" invisible="0"/>
                 </xpath>
                 <xpath expr="//field[@name='ordering_date']" position="after">
                     <field name="due_date" string="Due Date"/>
                     <field name="validation_due_date" invisible="1"/>
                 </xpath>

             </field>
         </record>

        <record id="purchase_requisition.view_purchase_requisition_filter" model="ir.ui.view">
            <field name="name">purchase.requisition.list.select</field>
            <field name="model">purchase.requisition</field>
            <field name="arch" type="xml">
                <search string="Search Call for Tenders">
                    <field name="name" string="Call for Tenders"/>
                    <field name="exclusive" />
                    <field name="request_id" string="No PP"/>
                    <filter string="New" domain="[('state','=','draft')]" help="New Call for Tenders"/>
                    <filter string="Confirmed" domain="[('state','=','in_progress')]" help="Call for Tenders in negotiation"/>
                    <filter string="Closed Tenders" domain="[('state','=','open')]" help="Call for Tenders where tenders are closed"/>
                    <separator/>
                    <filter string="Unassigned"  domain="[('user_id','=', False)]" help="Unassigned  Requisition"/>
                    <!--<filter name="due_date" string="Due Date" domain="[('state','!=','done'),('schedule_date','&lt;',ordering_date)]"/>-->
                    <field name="user_id" />
                    <group expand="0" string="Group By">
                        <filter string="Responsible" domain="[]" context="{'group_by':'user_id'}"/>
                        <filter string="Source" domain="[]" context="{'group_by':'origin'}"/>
                        <filter string="Status" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Ordering Date" domain="[]" context="{'group_by':'ordering_date'}"/>
                        <filter string="End Month" domain="[]" context="{'group_by':'date_end'}"/>
                    </group>
                </search>
            </field>
        </record>



    </data>
</openerp>