<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <template id="report_upkeep_fingerprint">
            <t t-call="report.html_container">
                <t t-call="report.internal_layout">
                    <div class="page">
                        <h2>Laporan Kontrol HK dan Sidik jari</h2>
                        <p>
                            <strong>Perusahaan</strong>: <span t-esc="report['form']['company_id'][1]"/><br/>
                            <strong>Kebun</strong>: <span t-esc="report['form']['estate_id'][1]"/><br/>
                            <strong>Periode</strong>: <span t-esc="report['form']['date_start']"/> -
                                    <span t-esc="report['form']['date_end']"/>
                        </p>
                        <!--<table class="table table-condensed borderless">-->
                            <!--<tr>-->
                                <!--<td class="col-md-1">Perusahaan:</td>-->
                                <!--<td class="col-md-auto"><span t-esc="report['form']['company_id'][1]"/></td>-->
                                <!--<td class="col-md-1">Periode</td>-->
                                <!--<td class="col-md-2"><span t-esc="report['form']['date_start']"/> - -->
                                    <!--<span t-esc="report['form']['date_end']"/></td>-->
                            <!--</tr>-->
                            <!--<tr>-->
                                <!--<td class="col-md-1">Kebun:</td>-->
                                <!--<td class="col-md-auto"><span t-esc="report['form']['estate_id'][1]"/></td>-->
                                <!--<td class="col-md-1"></td>-->
                                <!--<td class="col-md-2"></td>-->
                            <!--</tr>-->
                        <!--</table>-->

                        <!--table-->
                        <p>Beri tanda pada kolom A s.d. E sebagai keterangan sidik jari</p>
                        <table class="table table-condensed table-bordered" style="font-size: 65%">
                            <thead>
                                <tr>
                                    <th class="col-md-auto">KHL</th>
                                    <th class="col-md-1">Tanggal</th>
                                    <th class="col-md-1">Sidik Jari Masuk</th>
                                    <th class="col-md-1">Sidik Jari Pulang</th>
                                    <th class="col-md-1">HK</th>
                                    <th class="col-md-1">A</th>
                                    <th class="col-md-1">B</th>
                                    <th class="col-md-1">C</th>
                                    <th class="col-md-1">D</th>
                                    <th class="col-md-1">E</th>
                                </tr>
                            </thead>
                             <!--footer-->
                            <tfoot>
                                <tr>
                                    <td colspan="10">
                                        <p><strong>Keterangan</strong></p>
                                        <p><cite>A: Kerusakan mesin, B: Tidak finger, C: xxx</cite></p>
                                    </td>
                                </tr>
                            </tfoot>
                            <!--/footer-->
                            <!--group by assistant-->
                            <t t-set="assistant" t-value="[]"/>
                            <t t-foreach="Fingerprint" t-as="f">
                                <t t-set="assistant" t-value="assistant+[f['assistant_id']]"/>
                            </t>

                            <t t-foreach="set(assistant)" t-as="a">
                                <tr>
                                    <td colspan="10"><strong>Asisten <span t-esc="a['name']"/></strong></td>
                                </tr>

                                <!--team-->
                                <t t-set="team" t-value="[]"/>
                                <t t-foreach="Fingerprint" t-as="f">
                                    <t t-set="team" t-value="team+[f['team_id']]"/>
                                </t>

                                <t t-foreach="set(team)" t-as="t">
                                    <t t-if="a['id']==t['assistant_id']['id']">
                                        <tr>
                                            <td colspan="10">
                                                <strong>Kemandoran <span t-esc="t['name']"/></strong>
                                            </td>
                                        </tr>
                                        <!--fingerprint-->
                                        <t t-foreach="Fingerprint" t-as="ff">
                                            <t t-if="t['id']==ff['team_id']['id']">
                                                <tr>
                                                    <td>
                                                        <span t-esc="ff['employee_id']['name']"/>
                                                    </td>
                                                    <td>
                                                        <span t-esc="ff['date']"/>
                                                    </td>
                                                    <td>
                                                        <span t-esc="ff['sign_in']"/>
                                                    </td>
                                                    <td>
                                                        <span t-esc="ff['sign_out']"/>
                                                    </td>
                                                    <td>
                                                        <span t-esc="ff['number_of_day']"/>
                                                    </td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                            </t>
                                        </t>
                                        <!--fingerprint-->
                                    </t>
                                </t>

                                <!--/team-->
                            </t>
                            <!--/group by assistant-->
                        </table>
                        <!--/table-->

                        <!--approval-->
                        <table class="table table-condensed table-bordered col-md-6"
                               style="width:50%; page-break-before: auto">
                            <tr>
                                <td class="col-md-4">Membuat</td>
                                <td class="col-md-4">Mengetahui</td>
                                <td class="col-md-4">Menyetujui</td>
                            </tr>
                            <tr>
                                <td style="height: 100"></td>
                                <td style="height: 100"></td>
                                <td style="height: 100"></td>
                            </tr>
                            <tr>
                                <td>KTU</td>
                                <td>HR GA Assistant</td>
                                <td>Estate Manager</td>
                            </tr>
                        </table>
                        <!--/approval-->
                    </div>
                </t>
            </t>
        </template>
    </data>
</openerp>